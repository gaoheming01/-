<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        /* reset start */
        html,body{ overflow:hidden; height:100%;}
        body,h1,h2,h3,h4,p,ul,ol{ padding:0; margin:0; font:14px "微软雅黑";}
        li{ list-style:none;}
        img{ border:none;}
        a{ text-decoration:none;}
        a:active{ color:#009ee0;}
        /* reset end */

        /* common start */
        .clear{zoom:1;}
        .clear:after{ content:""; display:block; clear:both;}
        .commonTitle{ color:#009ee0; font-size:80px; line-height:0.8; font-weight:bold; letter-spacing:-5px;}
        /* common end */

        /*frame start*/
        #main{width:100%;height: 100%;}
        #header{width:100%;height: 80px;background: white;}
        #header-main{width:1100px;height:100%;margin:0 auto;;position: relative;}
        #logo{float:left;margin-top: 30px;}
        #nav{float: right;margin-top: 50px;}
        #nav li{float: left;position: relative;margin-left: 40px;}
        #nav li .up{position: absolute; left: 0;top: 0;color: black;width: 0%;
            overflow: hidden;transition: width .5s}
        #nav li:hover .up{width: 100%;}
        #arrow{width:21px;height: 11px;background: url(img/menuIndicator.png) no-repeat;position: absolute;left:50%;bottom: -11px;z-index:10;transition: left .5s}

        #content{width: 100%;position:relative;overflow: hidden;}
        #list{width: 100%;position: absolute;top: 0;left: 0;transition: top .5s;}
        #list .liList{width: 2000px;position: relative;left: 50%;margin-left: -1000px;overflow: hidden;}
        #list .divList{ width:1100px; height:520px; margin:0px auto; position:relative;background-color: red;}
        /*frame end*/


        /*home start*/
        #home{ background: url("img/bg1.jpg") no-repeat;}
        /*home  end*/

        /*course start*/
        #course{background: url("img/bg3.jpg") no-repeat;}
        /*course end*/


        /*works start*/
        #works{background: url("img/bg4.jpg") no-repeat;}
        /*works end*/

        /*about start*/
        #about{background: url("img/bg5.jpg") no-repeat;}
        /*about end*/

        /*team start*/
        #team{background: url("img/bg2.jpg") no-repeat;}
        /*team  end*/
    </style>
    <script>
        window.onload =function () {
            var oHeader =$('header');
            var oNav =$('nav');
            var oArrow =$('arrow');
            var oList = $('list');
            var oContent = $('content');
            var aLiNav = oNav.getElementsByTagName('li');
            var aLiList = getByClass( oList , 'liList' );
            var aDivList = getByClass( oList , 'divList' );
            // var oWorksContent = $('worksContent');
            // var oWorksContent2 = getByClass(oWorksContent , 'worksContent2')[0];
            // var oHomeContent = $('homeContent');
            // var oHomeContent1 = getByClass(oHomeContent , 'homeContent1')[0];
            // var oHomeContent2 = getByClass(oHomeContent , 'homeContent2')[0];

            var iNow =0;
            var iContentHeight =0;


            contentAuto();
            listContentAuto();
            bindNav();
            mouseWheel();
            // 浏览器窗口变化
            window.onresize = fnResize;


            function bindNav(){
                // 初始颜色和下箭头在第一个li下
                var oDiv = aLiNav[0].getElementsByTagName('div')[0];
                oDiv.style.width = '100%';
                oArrow.style.left =aLiNav[0].offsetLeft + aLiNav[0].offsetWidth/2 - oArrow.offsetWidth/2 + 'px';

                // 设置索引
                for(var i=0;i<aLiNav.length;i++){
                    aLiNav[i].index=i;
                    aLiNav[i].onmousedown=function () {
                        toMove(this.index);
                        iNow =this.index;

                    };
                }

            }


            function toMove(index) {
                // 重置
                for(var i=0;i<aLiNav.length;i++){
                    var oDiv = aLiNav[i].getElementsByTagName('div')[0];
                    oDiv.style.width='';
                }
                // 鼠标按下变化
                var oDiv = aLiNav[index].getElementsByTagName('div')[0];
                oDiv.style.width = '100%';

                oArrow.style.left=aLiNav[index].offsetLeft+aLiNav[index].offsetWidth/2 - oArrow.offsetWidth/2 + 'px';
                // ul整体位置上移
                oList.style.top=-index*iContentHeight+'px';

            }


            // 获取(可视区域高度-头部高)作为内容高度
            function contentAuto()  {
                iContentHeight =viewHeight()-oHeader.offsetHeight;
                oContent.style.height=iContentHeight+'px';
                for(var i=0;i<aLiList.length;i++){
                    aLiList[i].style.height=iContentHeight+'px';
                }
                oList.style.top=-iNow*iContentHeight+'px';

            }
            // 动态修改内容区域margin-top
            function listContentAuto() {
                // （蓝色区域高度-红色区域高度（固定520））/2
                var mt = (iContentHeight - 520)/2;
                for (var i=0;i<aDivList.length;i++){
                    aDivList[i].style.marginTop=mt+'px';
                }

            }
            // 鼠标滚轮切换页面
            function mouseWheel(){
                //火狐 : DOMMouseScroll( DOM事件必须用绑定事件的方式去写 addEventListener )
                //IE ,  谷歌 : mousewheel
                var bBtn = true;
                var timer = null;
                if(oContent.addEventListener){
                    oContent.addEventListener('DOMMouseScroll',function(ev){
                        var ev = ev || window.event;
                        clearTimeout(timer);
                        timer = setTimeout(function(){
                            toChange(ev);
                        },200);
                    },false);
                }
                oContent.onmousewheel = function(){
                    var ev = ev || window.event;
                    clearTimeout(timer);
                    timer = setTimeout(function(){
                        toChange(ev);
                    },200);
                };
                function toChange(ev){
                    //alert(ev.detail);  //↓ 3  ↑ -3
                    //alert(ev.wheelDelta); //↓ -120  ↑ 120
                    if(ev.detail){
                        bBtn = ev.detail > 0 ? true : false;
                    }
                    else{
                        bBtn = ev.wheelDelta < 0 ? true : false;
                    }
                    if(bBtn){   //↓
                        if(iNow != aLiList.length-1){
                            iNow++;
                        }
                        toMove(iNow);
                    }
                    else{   //↑
                        if(iNow != 0){
                            iNow--;
                        }
                        toMove(iNow);
                    }

                    if(ev.preventDefault){
                        ev.preventDefault();
                    }
                    else{
                        return false;
                    }
                }
            }
            // 浏览器大小改变重新获取
            function  fnResize() {
                contentAuto();
                listContentAuto();
            }
            function $(id){
                return document.getElementById(id);
            }
            function  viewWidth() {
                return window.innerWidth || document.documentElement.clientWidth;
                
            }
            function  viewHeight() {
                return window.innerHeight || document.documentElement.clientHeight;

            }
            // class选择器封装，传父集和class名字
            function getByClass(oParent,sClass) {
                // 父元素下所有子元素
                var aElem =oParent.getElementsByTagName('*');
                var arr =[];
                for(var i=0;i<aElem.length;i++){
                    if(aElem[i].className==sClass){
                        arr.push(aElem[i]);
                    }

                }
                return arr;
            }
        }




    </script>
</head>
<body>
<div id="main">
    <div id="header">
        <div id="header-main">
            <a href="" id="logo">
                <img src="img/logo.png" alt="">
            </a>
            <ul id="nav">
                <li>
                    <a href="javascript:;">
                        <div class="up"><img src="img/home_gruen.png" alt=""></div>
                        <div><img src="img/home.png"></div>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <div class="up">Course</div>
                        <div>Course</div>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <div class="up">Works</div>
                        <div>Works</div>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <div class="up">About</div>
                        <div>About</div>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <div class="up">Team</div>
                        <div>Team</div>
                    </a>
                </li>
            </ul>
            <div id="arrow"></div>
        </div>
    </div>

    <div id="content">
        <ul id="list">
            <li id="home" class="liList">
                <div id="homeContent" class="divList">
                    <ul class="homeContent1"></ul>
                    <ul class="homeContent2"></ul>
                </div>
            </li>
            <li id="course" class="liList">
                <div id="courseContent" class="divList">222222</div>
            </li>
            <li id="works" class="liList">
                <div id="workContent" class="divList">333333</div>
            </li>
            <li id="about" class="liList">
                <div id="aboutContent" class="divList">444444</div>
            </li>
            <li id="team" class="liList">
                <div id="teamContent" class="divList">555555</div>
            </li>

        </ul>
    </div>
</div>

</body>
</html>